\ Basic tests for Quarter Forth primitives
\ Load with: ./quarter tests/basic_tests.fth

\ =============================================================================
\ ARITHMETIC TESTS
\ =============================================================================

TESTING

T{ 5 3 + -> 8 }T
T{ 10 2 - -> 8 }T
T{ 4 5 * -> 20 }T
T{ 20 4 / -> 5 }T
T{ 13 5 /MOD -> 3 2 }T

\ =============================================================================
\ STACK MANIPULATION TESTS
\ =============================================================================

T{ 5 DUP -> 5 5 }T
T{ 5 10 SWAP -> 10 5 }T
T{ 5 10 DROP -> 5 }T
T{ 5 10 OVER -> 5 10 5 }T
T{ 5 10 NIP -> 10 }T
T{ 5 10 TUCK -> 10 5 10 }T

\ =============================================================================
\ COMPARISON TESTS
\ =============================================================================

T{ 5 3 < -> -1 }T
T{ 3 5 < -> 0 }T
T{ 5 5 < -> 0 }T

T{ 5 3 > -> 0 }T
T{ 3 5 > -> -1 }T
T{ 5 5 > -> 0 }T

T{ 5 5 = -> -1 }T
T{ 5 3 = -> 0 }T

\ =============================================================================
\ BITWISE TESTS
\ =============================================================================

T{ 5 3 AND -> 1 }T
T{ 5 3 OR -> 7 }T
T{ 5 3 XOR -> 6 }T
T{ -1 INVERT -> 0 }T
T{ 1 2 LSHIFT -> 4 }T
T{ 8 2 RSHIFT -> 2 }T

\ =============================================================================
\ MEMORY TESTS
\ =============================================================================

VARIABLE TEST-VAR

T{ 42 TEST-VAR ! TEST-VAR @ -> 42 }T
T{ 100 TEST-VAR ! TEST-VAR @ -> 100 }T

\ =============================================================================
\ CONTROL STRUCTURE TESTS
\ =============================================================================

T{ 5 DUP 0 > IF 10 + ELSE 20 + THEN -> 15 }T
T{ -5 DUP 0 > IF 10 + ELSE 20 + THEN -> 15 }T

\ =============================================================================
\ STDLIB TESTS
\ =============================================================================

T{ 5 NEGATE -> -5 }T
T{ -10 NEGATE -> 10 }T
T{ -5 ABS -> 5 }T
T{ 5 ABS -> 5 }T

T{ 5 1+ -> 6 }T
T{ 5 1- -> 4 }T
T{ 5 2* -> 10 }T
T{ 10 2/ -> 5 }T

T{ 5 3 MIN -> 3 }T
T{ 5 3 MAX -> 5 }T

T{ 1 2 3 ROT -> 2 3 1 }T
T{ 1 2 2DUP -> 1 2 1 2 }T

\ =============================================================================
\ REPORT
\ =============================================================================

REPORT
